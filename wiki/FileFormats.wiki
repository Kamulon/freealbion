#summary Overview of the Albion data file formats.

= Introduction =

Albion was developed back in 1995 when piracy of PC games was on a much smaller scale than it is today and a simple CD present check was sufficient to prevent piracy (nobody had a CD writer back then!).

Because of this, few (if any) of the data files are encrypted. This page documents some of the different file formats used by the game.

*NOTE* All values are decimal unless written in the hexadecimal format e.g. 0xFF

== Files ==
|| *XLD/DAT File* || *Description* ||

_3D-Map_
||[3DBCKGR 3DBCKGR]||3D backgrounds||
||[3DFLOOR 3DFLOOR]||floor/ceiling textures|||
||[3DOBJEC 3DOBJEC]||object textures||
||[3DOVERL 3DOVERL]||overlay textures||
||[3DWALLS 3DWALLS]||wall textures||
||[LABDATA LABDATA]||misc 3D map settings, texture -> tile# mapping||
||[AUTOGFX AUTOGFX]||automap/overview map graphics||
||[MAPDATA MAPDATA]||actual 2D and 3D map data||

_2D-Map_
||[ICONGFX ICONGFX]||tilesets||
||[ICONDAT ICONDAT]||tileset tiles -> tile# mapping||
||[MAPDATA MAPDATA]||actual 2D and 3D map data||

_Item_
||[ITEMGFX ITEMGFX]||item graphics||
||[ITEMLIST ITEMLIST]||item properties||
||[ITEMNAME ITEMNAME]||item names||

_Misc_
||[BLKLIST BLKLIST]||||
||[COMBACK COMBACK]||combat backgrounds||
||[COMGFX COMGFX]||combat graphics||
||[EVNTSET EVNTSET]||event sets||
||[FBODPIX FBODPIX]||||
||[FONTS FONTS]||fonts||
||[MONCHAR MONCHAR]||monster properties||
||[MONGFX MONGFX]||combat monster 3D graphics||
||[MONGRP MONGRP]||monster group layouts||
||[NPCGR NPCGR]||npc 2D graphics (interior/big)||
||[NPCKL NPCKL]||npc 2D graphics (exterior/small)||
||[PALETTE PALETTE]||palettes||
||[PARTGR PARTGR]||party 2D graphics (interior/big)||
||[PARTKL PARTKL]||party 2D graphics (exterior/small)||
||[PICTURE PICTURE]||"cut-scene" pictures||
||[SAMPLES SAMPLES]||audio samples||
||[SCRIPT SCRIPT]||scripts||
||[SLAB SLAB]||background image (setup?)||
||[SMLPORT SMLPORT]||npc/party avatars||
||[SONGS SONGS]||songs||
||[SPELLDAT SPELLDAT]||spell properties||
||[TACTICO TACTICO]||combat graphics (tactical board)||
||[TRANSTB TRANSTB]||||
||[WAVELIB WAVELIB]||additional audio samples?||

== XLD Archives ==

The XLD file format is an uncompressed container format for the game resources. 

|| *Offset* || *Length* || *Name* || *Description* ||
||0||4||magic||Magic number. The file signature (XLD0).||
||4||1||unknown||||
||6||2||entries||The number of objects stored within the archive.||
||9||entries `*` 4||lengths||A list of long integers (4 bytes) which contains the length of the stored object.|||
||10||*||DATA||Binary data for the stored files.||

The rest of the file contains the stored objects, one after another.


== ITEMNAME.DAT ==

This file contains the names of all the items within the game. They are translated into English, German and French.

Each record is 60 bytes long and there are 462 records.

|| *Offset* || *Length* || *Description* ||
||0||20||German text||
||20||20||English text||
||40||20||French text||

http://freealbion.googlecode.com/svn/wiki/img/item-name-hex.png

== ITEMLIST.DAT ==

There are 462 records this file and each record is 40 bytes long. It is believe that, in the absence of any unique identifier in the file, the item ID is determined from its position in the file.

|| *Offset* || *Length* || *Name* || *Description* ||
||0||1||unknown||||
||1||1||typeid||[Items#Types Item type]||
||2||1||slotType||||
||3||1||unknown||||
||4||1||gender||Determines which gender can use this item. 2 = female, 3 = any||
||5||1||hands||Determines how many free hands are required to equip the item.||
||6||1||lpMaxBonus||Bonus value to life points.||
||7||1||lpMaxBonus||Bonus value to spell points.||
||8||1||attributeType||Attribute bonus type.||
||9||1||attributeBonus||Attribute bonus value.||
||10||1||skillType||Skill bonus type.||
||11||1||skillBonus||Skill bonus value.||
||12||1||protection||Protection from physical damage.||
||13||1||damage||Physical damage caused.||
||14||1||ammoType||Ammunition type.||
||15||1||skillTax1Type||Skill Tax 1 Type||
||16||1||skillTax2Type||Skill Tax 2 Type||
||17||1||skillTax1||Skill Tax 1 value. [Items#Ranged_Values Ranged Values]||
||18||1||skillTax2||Skill Tax 2 value. [Items#Ranged_Values Ranged Values]||
||19||1||unknown||unknown||
||20||1||unknown||unknown||
||21||1||spellClass||unknown||
||22||1||spellEffect||unknown||
||23||1||charges||unknown||
||24||1||enchantments||spell or enchantment on item||
||25||1||maxEnchantments||spell or enchantment charges available||
||26||1||maxCharges||maxiumum spell or enchantment charges||
||27||1||count||Size of stack||
||28||1||unknown||unknown||
||29||1||unknown||unknown||
||30||2||weight||weight of the item in grammes||
||32||2||value||Base resell value / 10.||
||34||2||icon||Image for the item||
||36||2||class||Appears to be a bitfield that controls which classes can use the item.||
||38||2||race||Appears to be a bitfield that controls which race can use the item.||


Please be aware that these values are all derived from observation and not guaranteed to be correct.

http://freealbion.googlecode.com/svn/wiki/img/item-list-hex.png

== ITEMGFX ==

Each item has an icon associated with it. Each image is 32x32 pixels in size with one byte per pixel. The images are indexed against a 256 color palette.

As yet I have not determined which palette.


== PALETTE.000 ==

This file contains 64 colors with 1 byte per component (r, g, b) per color. 

|| *Offset* || *Length* || *Description* ||
||0||1||Red||
||1||1||Green||
||2||1||Blue||

There is no alpha channel.

It is worth noting that each of the entries in PALETTE0.XLD is the same format as this, except that they contain 192 colours. They are merged with this palette to form a 256 colour palette.

== SPELLDAT.DAT ==

Unknown format. This file is 1050 bytes long and there are 53 spells in the game.

== SLAB ==

This is a 300x200 indexed image. I believe it is used as the background of the main menu. The palette is unknown.

== Intro Video ==

The introduction video is encoded as a [http://www.radgametools.com/ Rad Game Tools] Smacker video. The playback software for this is commercially licensed however there is an open source implementation in the [http://www.scummvm.org/ ScummVM] project.

== Cutscenes ==

Appear to be encoded as FLI files, a detailled description of which can be found [http://www.compuphase.com/flic.htm here].

== Sounds / Audio Samples ==

Appear to be raw PCM audio. Not certain about the format of the PCM though (bit rate, channels, etc).


=== Credits === 
 
 * ~~Thanks~~ *Massive thanks* to rAs^ and Flo of the [http://albion2.berlios.de/board/ Albion2] message boards for assistance with the item database.